<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>on() method</title>
</head>
<body>
    <h1>on('event', 'target selector', 'binding data', callback function, map)</h1>
    <ul>
        <li>'event': 이벤트 종류를 문자열로 입력</li>
        <li>'target selector': 이벤트를 부여할 최종 target을 css selector로 지정</li>
        <li>'binding data': callback function에 전달할 데이터</li>
        <li>callback function: 콜백함수의 이름 또는 익명함수 선언문</li>
        <li id="except">map: 자주 사용하지 않으므로 pass => 추후 예시를 찾아서 학습해보시길...</li>
    </ul>
    <script src="../resources/jquery-3.6.0.min.js"></script>
    <script>
        $(function () {
            $('ul').append('<li><button type="button" id="newBtn">동적으로 만든 버튼</button>');
                //document영역을 로드 후 실행하는 영역이기때문에 idVal의 getParamValue()함수를 실행할 수 있다
            $(document).on('click', '#newBtn', {idVal: getParamValue()}, alertMaker);
            // $('#newBtn').on('click', function () {
            //     alert('동적으로 만든 버튼 클릭!');
            // });
        });

        // $('#newBtn').on('click', function () {
        //     alert('동적으로 만든 버튼 클릭!');
        // }); //안됨

        function alertMaker(obj) {
            const dataObj = obj.data.idVal; //파라미터.data.전달된 keyName
            console.log(dataObj);
            //param을 이용해서 실행...
            alert('동적으로 만든 버튼');
            
            //let targetId = $('ul li').last().prev().attr('id');
            //console.log(typeof targetId, targetId);
            $(`#${dataObj}`).css('color', 'red').css('text-decoration', 'line-through');
        }
        // $(document).on('click', '#newBtn', function() {
        //     alertMaker(dataArr);
        // });
        
        //const dataObj = {k: 'button', v: 'event'};//추후에 동적으로 만들어지는 데이터라고 가정
        function getParamValue() {
            return $('ul li').last().prev().attr('id');
        }
        //$(document).on('click', '#newBtn', {param: dataObj}, alertMaker);
        
        // $(document).on('click', '#newBtn', dataArr, function() {
        //     alert('동적으로 만든 버튼');
        //     //$('#except').css('color', 'red').css('text-decoration', 'line-through');
            
        //     //let targetId = $('ul li:last');
        //     //let targetId = $('ul li').last().prev();
        //     //$(targetId).css('color', 'red').css('text-decoration', 'line-through');
            
        //     let targetId = $('ul li').last().prev().attr('id');
        //     console.log(typeof targetId, targetId);
        //     $(`#${targetId}`).css('color', 'red').css('text-decoration', 'line-through');
        // });

        // document.addEventListener('click', function(e) {
        //     if(e.target.id=='newBtn') {
        //         alert('click!!!');
        //     }
        // });
    </script>
</body>
</html>